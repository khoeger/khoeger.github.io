---
layout: post
title:  "Investigating 3D Audio"
date:   2017-12-13 13:23:17 -0500
categories: ambisonic csound python
published: true
mathjax: true
---
## Motivation
Back in October, I had a thought.
> Wouldn't it be cool if I could work 3D audio into my compositions?

I envisioned all sorts of interesting ways I could incorporate 3D Audio.
Most involved applying 3D effects to my music through the use of algorithms.
What I realized, after lots of daydreaming, was that I do not truly know how we hear in 3D.
What sort of signals do I need?
How can I trick an ear?

Luckily, the [Immersive Music Hackathon](http://monthlymusichackathon.org/post/167193519532/immersive-music-hackathon) was coming up.
This gave me sufficient motivation to look up psychoacoustics, figure out what sort of concepts I would want to know to start to tackle a project for the hackathon.
As an organizer, I would not have much time to work on the project while at the event. But perhaps I would have enough time to work on a scheme for creating 3D audio appropriate for my music.

While the hackathon was a resounding success, and Alex, Charles, Jason, Paul, Rachel, and Thor were amazing people to bounce ideas off of, I ended up needing a bit more time to do the research. Some concepts I was introduced to are *HRTFs* and *ambisonic technology*.

## Investigating concepts
When investigating concepts, I aim to keep the following questions in mind:

* Have I learned enough about how, psychologically, we humans process sound to use my knowledge to make interesting artistic effects?
* Have I found pre-existing solutions that will make implementing my ideas easier?

I routinely use [Python 3.6](https://docs.python.org/3/) to analyze data, but could also use the [R Programming Language](https://www.r-project.org/) to analyze data.
I have used MIT's [music 21] Python library to generate music within python in the past, but as implementing multi-channel solutions is not a feature of music 21's, I need to generate audio in some other fashion.
As I am comfortable with Python, and know that I can use it as an interface to [Csound](http://www.csounds.com/) to create music, and the Csound library is well-maintained and has a wealth of functions I can draw upon, I will search for solutions that will be possible using a mix of both programs.


### How do we process sounds?

### Ambisonic technology
Many of the hackathon's speakers mentioned ambisonic technology.
#### What is it?
The creators of Ambisonics set out to improve upon the "quadraphonic" systems, as the quality of sound output by these systems varied wildly based upon the location of the listener with relation to the speaker, and the transmission of sounds was made easier. See [Why Ambisonics Offers "The Best Sounds Surround"](#ambisonics) for more details.

#### Out of the box solutions

##### Csound
Csound's community has a associated sources that indicate that Csound has been used successfully in the past to implement ambisonics.
* Jan Jacob Hoffmann's [Ambisonics Tutorial](#ambisonics_csound_tutorial) Covers all of the concepts that can be encapsulated by Csound when one wishes to implement ambisonics. He has also posted code to go along with his tutorial.
* Martin Neukom's [Ambisonics User Defined Opcodes for Csound](#ambisonics_csound_opcodes) lists different opcodes that are used for ambisonics and instructs users on how to use them.
* [Panning and Spatialization](#surroundsound_csound_tutorial) is yet another csound tutorial that demos how to create 3d audio using Csound. This walks the reader through the very basics of many ways you can use Csound to create 3D audio, including stereo panning, 3-d binaural encoding, multichannel to headphones or loudspeakers, VBAP, or Ambisonics.

The University of York's [Music Technology Group](https://www.york.ac.uk/inst/mustech/3d_audio/cs_ambis.htm), also has a basic implementation of using Ambisonics for Csound. Basically, if you want to use Csound, there are many options.
##### Python
Python has a package called python-acoustics, with an [ambisonics module](http://python-acoustics.github.io/python-acoustics/reference.html).

This would be ideal to use, as I could just go straight from python and data manipulation to musical output. However, when attempting
{% highlight command %}
C:\\filepath>pip install python-acoustics
{% endhighlight %}
I get
{% highlight command %}
Collecting python-acoustics
  Could not find a version that satisfies the requirement python-acoustics (from versions: )
No matching distribution found for python-acoustics
{% endhighlight %}
Perhaps this is a feature of using `Python 3.6.2`?
#### Ambisonic Take-Aways
* If I wish to use ambisonics, I have found relevant technology that I can use with my python/csound process. This will save me time during implementation, as well as insure the continued effectiveness of my piece when my listeners are not using headphones, or when the number of channels accessible changes.
* Ambisonics itself does not include distance measurements. It works on a unit sphere. Other spatialization techniques are used to implement this.
* Csound is one possible way to take my python data manipulation and get music output 3d audio using ambisonics. I could use high quality sound output, and any existing Csound instruments.
* While a python version is available, I need to do more exploration before I can use it. There's a good chance that it's only usable with `Python 2`.


### HRTFs

### VBAP

### Ambisonics vs HRTFs vs VBAP


## References
[1]<a name="surroundsound_csound_tutorial"></a> Panning and Spatialization. [http://files.csound-tutorial.net/floss_manual/Release03/Cs_FM_03_ScrapBook/b-panning-and-spatialization.html](http://files.csound-tutorial.net/floss_manual/Release03/Cs_FM_03_ScrapBook/b-panning-and-spatialization.html). Berlin, 2011. Referenced on December 13, 2017.

[2]<a name="ambisonics"></a> Why Ambisonics Offers "The Best Sounds Surround". [http://www.ambisonic.net/](http://www.ambisonic.net/). Referenced on December 13, 2017.

[3]<a name="ambisonics_csound_tutorial"></a> Hofmann, Jan Jacob. Ambisonic Tutorial. [http://www.sonicarchitecture.de/en/index_practice.html](http://www.sonicarchitecture.de/en/index_practice.html), with code links, or [http://www.csounds.com/resources/AmbiTutorial_en.pdf](http://www.csounds.com/resources/AmbiTutorial_en.pdf), as pdf. Referenced on December 13, 2017.

[4]<a name="ambisonics_csound_opcodes"></a> Neukom, Martin. Ambisonics User Defined Opcodes for Csound. [http://smc.afim-asso.org/smc-icmc-2014/papers/images/VOL_1/0804.pdf](http://smc.afim-asso.org/smc-icmc-2014/papers/images/VOL_1/0804.pdf). Zurich University of the Arts. Zurich, 2014. Referenced on December 13, 2017.
